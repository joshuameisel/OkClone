<ul class="questions <%= "editable" if current_user %>"></ul>

<script>
$(document).ready(function () {
  var user = new OkClone.Models.User({id: <%= params[:user_id] %>});
  user.fetch({
    success: function () {
      var view = new OkClone.Views.ProfileTop({model: user});
      $(".content-main").prepend(view.render().$el);
    }
  });

  var answers = [];
  <% if !current_user || params[:user_id].to_i != current_user.id %>
  	<% @answers.each_with_index do |answer, i| %>
  		answers[<%= i %>] = new Answer({id: <%= answer.id %>});
  		answers[<%= i %>].fetch({
  			success: function() {
  				var view = new AnswerShow({model: answers[<%= i %>]});
  				$("ul.questions").append(view.render().$el);
  			}
  		});
  	<% end %>
  <% else %>
    <% Question.all.each_with_index do |question, i| %>
  		answers[<%= i %>] = new Answer();
  		answers[<%= i %>].fetch({
  			success: function() {
  				var view = new AnswerShow({model: answers[<%= i %>]});
  				$("ul.questions").append(view.render().$el);
  			}
  		});
    <% end %>
  <% end %>
});
</script>